<head>
<title>Hijack</title>
<link rel="preload" href="https://rickroll.ndev.tk/utils.dev.js" as="script">
<link rel="prerender" href="https://rickroll.ndev.tk/#noWait" />
<link rel="prerender" href="https://rickroll.ndev.tk/crash" />
<link rel="prerender" href="https://ndev.tk/rickroll.html" />
</head>

<script type="text/javascript" src="utils.dev.js"></script>
<div id="init">
<h1>Hijack!</h1>
<p1>Attempts to crash browser if page is closed.</p1><br>
<button onclick="custom()">Custom</button>
<button onclick="openLock('https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1&controls=0')">Rickroll</button>
<button onclick="openLock('https://example.com/')">example.com</button>
<button onclick="openLock('https://ransom.ndev.tk/fb.html')">Facebook blocker</button>
<br>
</div>
<iframe id="frame" frameborder="0" scrolling="no" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<style>
body {
    margin: 0;
}
iframe {
    display: block;
    background: #000;
    border: none;
    height: 100vh;
    width: 100vw;
}
</style>
<script>
defence();

function custom() {
	url = prompt("Please Input URL: ", "https://");
	if(url) openLock(url);
}

async function toDataURL(url) {
    return fetch(url).then((response) => {
            return response.blob();
        }).then(blob => {
            return URL.createObjectURL(blob);
        });
}
async function download(url, filename) {
        var a = document.createElement("a");
        a.href = await toDataURL(url);
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
}

function openLock(url) {
	let settings = (navigator.userAgent.includes("Firefox")) ? "width=250,height=200" : "";
	init.hidden = true;
	lock = open("lock.dev.html", "Locker", settings)
	detectClose(lock, "https://ransom.ndev.tk/lock.dev.html");
	frame.src = url;
	setTimeout(function(){
		download("data:text/html,RickRoll :D", "HELLO.rick");
	}, 1);
}
</script>
